import{a as q,g as K,k as D,P as be,r as b,u as V,e as H,_ as I,j as t,h as T,i as Q,v as ve,w as W,x as Ce,b as j,y as ye,f as d,c as G,F as k,G as s,z as J,C as E,o as Y,B as S,L as X,D as Z,E as ee,H as te,I as z,J as ae,K as ne,S as Ie,q as Pe,p as we,A as $e,s as Se,M as ze,t as ke}from"./index-6ebe7ac4.js";import{A as ie}from"./AnimatedPage-aa31ba2b.js";import{C as re}from"./Checkbox-69a19676.js";import{C as O,D as oe,a as se}from"./DialogTitle-5d61330d.js";import{C as M}from"./CircularProgress-5956a5f6.js";import{D as ce}from"./DialogContent-02646796.js";import"./motion-c906af51.js";import"./SwitchBase-629c6141.js";import"./useFormControl-b0644f7e.js";function _e(e){return q("MuiCard",e)}K("MuiCard",["root"]);const Le=["className","raised"],Ne=e=>{const{classes:a}=e;return Q({root:["root"]},_e,a)},Re=D(be,{name:"MuiCard",slot:"Root",overridesResolver:(e,a)=>a.root})(()=>({overflow:"hidden"})),Ae=b.forwardRef(function(a,n){const i=V({props:a,name:"MuiCard"}),{className:r,raised:f=!1}=i,p=H(i,Le),o=I({},i,{raised:f}),h=Ne(o);return t(Re,I({className:T(h.root,r),elevation:f?8:void 0,ref:n,ownerState:o},p))}),le=Ae;function Me(e){return q("MuiPagination",e)}K("MuiPagination",["root","ul","outlined","text"]);const je=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function Oe(e={}){const{boundaryCount:a=1,componentName:n="usePagination",count:i=1,defaultPage:r=1,disabled:f=!1,hideNextButton:p=!1,hidePrevButton:o=!1,onChange:h,page:m,showFirstButton:P=!1,showLastButton:v=!1,siblingCount:u=1}=e,c=H(e,je),[C,g]=ve({controlled:m,default:r,name:n,state:"page"}),l=(y,R)=>{m||g(R),h&&h(y,R)},x=(y,R)=>{const me=R-y+1;return Array.from({length:me},(lt,xe)=>y+xe)},w=x(1,Math.min(a,i)),_=x(Math.max(i-a+1,a+1),i),F=Math.max(Math.min(C-u,i-a-u*2-1),a+2),A=Math.min(Math.max(C+u,a+u*2+2),_.length>0?_[0]-2:i-1),B=[...P?["first"]:[],...o?[]:["previous"],...w,...F>a+2?["start-ellipsis"]:a+1<i-a?[a+1]:[],...x(F,A),...A<i-a-1?["end-ellipsis"]:i-a>a?[i-a]:[],..._,...p?[]:["next"],...v?["last"]:[]],U=y=>{switch(y){case"first":return 1;case"previous":return C-1;case"next":return C+1;case"last":return i;default:return null}},N=B.map(y=>typeof y=="number"?{onClick:R=>{l(R,y)},type:"page",page:y,selected:y===C,disabled:f,"aria-current":y===C?"true":void 0}:{onClick:R=>{l(R,U(y))},type:y,page:U(y),selected:!1,disabled:f||y.indexOf("ellipsis")===-1&&(y==="next"||y==="last"?C>=i:C<=1)});return I({items:N},c)}function De(e){return q("MuiPaginationItem",e)}const Ee=K("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon"]),$=Ee,ue=W(t("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),ge=W(t("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),pe=W(t("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),he=W(t("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),Fe=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],fe=(e,a)=>{const{ownerState:n}=e;return[a.root,a[n.variant],a[`size${G(n.size)}`],n.variant==="text"&&a[`text${G(n.color)}`],n.variant==="outlined"&&a[`outlined${G(n.color)}`],n.shape==="rounded"&&a.rounded,n.type==="page"&&a.page,(n.type==="start-ellipsis"||n.type==="end-ellipsis")&&a.ellipsis,(n.type==="previous"||n.type==="next")&&a.previousNext,(n.type==="first"||n.type==="last")&&a.firstLast]},Be=e=>{const{classes:a,color:n,disabled:i,selected:r,size:f,shape:p,type:o,variant:h}=e,m={root:["root",`size${G(f)}`,h,p,n!=="standard"&&`${h}${G(n)}`,i&&"disabled",r&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[o]],icon:["icon"]};return Q(m,De,a)},Ue=D("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:fe})(({theme:e,ownerState:a})=>I({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${$.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},a.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},a.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)})),Ge=D(Ce,{name:"MuiPaginationItem",slot:"Root",overridesResolver:fe})(({theme:e,ownerState:a})=>I({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${$.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${$.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${$.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selected} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:j(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${$.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selected} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:j(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${$.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}}},a.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},a.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)},a.shape==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius}),({theme:e,ownerState:a})=>I({},a.variant==="text"&&{[`&.${$.selected}`]:I({},a.color!=="standard"&&{color:(e.vars||e).palette[a.color].contrastText,backgroundColor:(e.vars||e).palette[a.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[a.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[a.color].main}},[`&.${$.focusVisible}`]:{backgroundColor:(e.vars||e).palette[a.color].dark}},{[`&.${$.disabled}`]:{color:(e.vars||e).palette.action.disabled}})},a.variant==="outlined"&&{border:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${$.selected}`]:I({},a.color!=="standard"&&{color:(e.vars||e).palette[a.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[a.color].mainChannel} / 0.5)`:j(e.palette[a.color].main,.5)}`,backgroundColor:e.vars?`rgba(${e.vars.palette[a.color].mainChannel} / ${e.vars.palette.action.activatedOpacity})`:j(e.palette[a.color].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[a.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:j(e.palette[a.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${$.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[a.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:j(e.palette[a.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}},{[`&.${$.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}})})),Te=D("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,a)=>a.icon})(({theme:e,ownerState:a})=>I({fontSize:e.typography.pxToRem(20),margin:"0 -8px"},a.size==="small"&&{fontSize:e.typography.pxToRem(18)},a.size==="large"&&{fontSize:e.typography.pxToRem(22)})),He=b.forwardRef(function(a,n){const i=V({props:a,name:"MuiPaginationItem"}),{className:r,color:f="standard",component:p,components:o={},disabled:h=!1,page:m,selected:P=!1,shape:v="circular",size:u="medium",slots:c={},type:C="page",variant:g="text"}=i,l=H(i,Fe),x=I({},i,{color:f,disabled:h,selected:P,shape:v,size:u,type:C,variant:g}),w=ye(),_=Be(x),A=(w.direction==="rtl"?{previous:c.next||o.next||he,next:c.previous||o.previous||pe,last:c.first||o.first||ue,first:c.last||o.last||ge}:{previous:c.previous||o.previous||pe,next:c.next||o.next||he,first:c.first||o.first||ue,last:c.last||o.last||ge})[C];return C==="start-ellipsis"||C==="end-ellipsis"?t(Ue,{ref:n,ownerState:x,className:T(_.root,r),children:"…"}):d(Ge,I({ref:n,ownerState:x,component:p,disabled:h,className:T(_.root,r)},l,{children:[C==="page"&&m,A?t(Te,{as:A,ownerState:x,className:_.icon}):null]}))}),We=He,qe=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],Ke=e=>{const{classes:a,variant:n}=e;return Q({root:["root",n],ul:["ul"]},Me,a)},Ve=D("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:n}=e;return[a.root,a[n.variant]]}})({}),Qe=D("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,a)=>a.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function Je(e,a,n){return e==="page"?`${n?"":"Go to "}page ${a}`:`Go to ${e} page`}const Ye=b.forwardRef(function(a,n){const i=V({props:a,name:"MuiPagination"}),{boundaryCount:r=1,className:f,color:p="standard",count:o=1,defaultPage:h=1,disabled:m=!1,getItemAriaLabel:P=Je,hideNextButton:v=!1,hidePrevButton:u=!1,renderItem:c=N=>t(We,I({},N)),shape:C="circular",showFirstButton:g=!1,showLastButton:l=!1,siblingCount:x=1,size:w="medium",variant:_="text"}=i,F=H(i,qe),{items:A}=Oe(I({},i,{componentName:"Pagination"})),B=I({},i,{boundaryCount:r,color:p,count:o,defaultPage:h,disabled:m,getItemAriaLabel:P,hideNextButton:v,hidePrevButton:u,renderItem:c,shape:C,showFirstButton:g,showLastButton:l,siblingCount:x,size:w,variant:_}),U=Ke(B);return t(Ve,I({"aria-label":"pagination navigation",className:T(U.root,f),ownerState:B,ref:n},F,{children:t(Qe,{className:U.ul,ownerState:B,children:A.map((N,y)=>t("li",{children:c(I({},N,{color:p,"aria-label":P(N.type,N.page,N.selected),shape:C,size:w,variant:_}))},y))})}))}),de=Ye;function Xe(e){const a={justifyContent:"space-evenly",alignItems:"center",height:"20%",width:"100%"},n={width:"80%",fontSize:"20px"};return t(k,{children:t(s,{item:!0,container:!0,alignSelf:"start",flexDirection:"column",justifyContent:"start",alignContent:"center",xs:2,children:d(s,{container:!0,flexDirection:"column",height:.5,width:.9,children:[t(s,{fontSize:30,textAlign:"center",padding:"20px 0 40px",children:"Filter Items"}),Object.keys(e.catagoriesAllowed).map(i=>{const r=i,f=e.catagoriesAllowed[i];return t(s,{container:!0,sx:a,children:d(s,{item:!0,sx:n,children:[t(re,{inputProps:{"aria-label":`filter ${r} checkbox`},checked:f,onChange:p=>{let o={...e.catagoriesAllowed};o[`${r}`]=p.target.checked,e.setCatagoriesAllowed({...o});const h=e.products.filter(m=>!{...o}[m.catagory]);e.setFilteredProducts([...h])}}),r]})},r)})]})})})}const Ze="_card_zb6hd_25",L={card:Ze,"card-container":"_card-container_zb6hd_43","card-img":"_card-img_zb6hd_77","card-info":"_card-info_zb6hd_91","card-price":"_card-price_zb6hd_101","card-delivery":"_card-delivery_zb6hd_109","btn-purchase":"_btn-purchase_zb6hd_119","dialog-container":"_dialog-container_zb6hd_139"};function et(e){const[a,n]=b.useState(!1),[i,r]=b.useState(!1),f=J(v=>v.cart.cart),p=E(),o=()=>{if(localStorage.getItem("isLogged")==="LOGGED_IN")ee(r).then(v=>{r(!0);const u=v.find(c=>c.product.id===e.product.id);u?ae(r,u.cart_item_id,e.product.id,u.quantity+1).then(c=>{p(z.changeExistingItem(["increase",c.id]))}):te(r,e.product.id).then(c=>{p(z.addNewCartItem(c))})});else if(localStorage.getItem("isLogged")!=="LOGGED_IN"){const v=f.find(u=>u.product.id===e.product.id);p(v?z.changeExistingItem(["increase",e.product.id,"anonymous"]):z.addNewCartItem({quantity:1,product:e.product}))}},h=()=>{n(!0)},m=()=>{n(!1)};return d(k,{children:[t(le,{sx:{height:"350px",width:"250px",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#f8f9fa",borderRadius:"10px",border:"1px solid #96f2d7"},elevation:2,children:d("div",{className:L["card-container"],children:[t(Y,{component:S,sx:{height:"100%",width:"100%",gridArea:"img","&:hover":{background:"none"}},onClick:h,disableRipple:!0,"aria-label":"Popup for more product info",children:t(O,{component:"img",height:"140",width:"184",src:e.product.image_url,alt:e.product.name,sx:{borderRadius:"20px"}})}),t("div",{className:L["card-info"],children:`Handmade ${e.product.name}`}),t("div",{className:L["card-price"],children:`£${e.product.price}`}),t("div",{className:L["card-delivery"],children:"FREE UK delivery"}),d("div",{className:L["btn-purchase"],children:[t(X,{to:`/product/handmade-${e.product.name.toLowerCase().replaceAll(" ","-")}-${e.product.id}`,title:"Details",children:t(S,{variant:"contained",size:"big","aria-label":`Button link to ${e.product.name} detail page`,children:"Details"})}),i?t(M,{}):t(S,{variant:"contained",size:"medium",onClick:o,"aria-label":`Add ${e.product.name} to cart`,children:"Add Cart"})]})]})}),d(Z,{open:a,onClose:m,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",PaperProps:{sx:{height:"90%",maxWidth:"70%",display:"flex",flexDirection:"row",flex:"1 1 50%",borderRadius:"20px",justifyContent:"center",alignItems:"center"}},children:[t(O,{component:"img",image:e.product.image_url,alt:`Large ${e.product.name}`,sx:{height:"80%",width:"80vh",marginLeft:"4%",borderRadius:"20px"}}),t(ce,{sx:{height:"60vh",lineHeight:"1.5rem",display:"flex",justifyContent:"center",alignItems:"center"},children:d("div",{className:L["dialog-container"],children:[t(oe,{fontSize:30,children:"Quick Info"}),t("div",{className:L["dialog-item"],children:"Handcrafted item"}),t("div",{className:L["dialog-item"],children:"Dispatches from a small business in United Kingdom"}),t("div",{className:L["dialog-item"],children:"Materials: copper"}),t("div",{className:L["dialog-item"],children:"FREE UK delivery"}),t(se,{children:t(S,{onClick:m,size:"big","aria-label":"Close Popup",children:"Close"})})]})})]})]})}function tt(e){const[a,n]=b.useState([]),[i,r]=b.useState([]),[f,p]=b.useState(!1),[o,h]=b.useState({}),[m,P]=b.useState(1),[v,u]=b.useState(0),c=(g,l)=>{P(l)},C=E();return b.useEffect(()=>{const g=[...new Set(e.products.map(x=>x.catagory))].reduce((x,w)=>(x[w]=!1,x),{});h(g),n(e.products),r(e.products);const l=e.products.length/8;l===Number.isInteger(l)?u(l):u(Math.trunc(l)+1),C(ne.replaceShop(a))},[]),t(k,{children:t(ie,{children:d(s,{container:!0,height:"auto",width:1,justifyContent:"center",margin:"2rem 0 ",children:[t(Xe,{catagoriesAllowed:o,setCatagoriesAllowed:h,products:a,setFilteredProducts:r}),d(s,{item:!0,container:!0,width:.8,flexDirection:"column",children:[d(s,{item:!0,container:!0,gap:2,justifyContent:"start",alignItems:"start",children:[!f&&a.filter(g=>{const l=(m-1)*8,x=l+8;return!o[g.catagory]&&i.indexOf(g)>=l&&i.indexOf(g)<x}).map(g=>t(et,{product:g},g.id)),f&&t(M,{size:"25rem",sx:{margin:"auto"}})]}),t(s,{item:!0,container:!0,justifyContent:"center",children:t(de,{count:v,page:m,onChange:c,shape:"rounded"})})]})]})})})}function at(e){const a={justifyContent:"space-evenly",alignItems:"center",height:"20%",width:"100%"},n={width:"80%",fontSize:"16px"};return t(k,{children:d(s,{container:!0,flexDirection:"column",height:.5,width:.9,children:[t(s,{fontSize:20,textAlign:"center",padding:"20px 0 40px",children:"Filter Items"}),Object.keys(e.catagoriesAllowed).map(i=>{const r=i,f=e.catagoriesAllowed[i];return t(s,{container:!0,sx:a,children:d(s,{item:!0,sx:n,children:[t(re,{inputProps:{"aria-label":`filter ${r} checkbox`},checked:f,onChange:p=>{let o={...e.catagoriesAllowed};o[`${r}`]=p.target.checked,e.setCatagoriesAllowed({...o});const h=e.products.filter(m=>!{...o}[m.catagory]);e.setFilteredProducts([...h])}}),r]})},r)})]})})}function nt(e){const[a,n]=b.useState(!1),[i,r]=b.useState(!1),f=J(v=>v.cart.cart),p=E(),o=()=>{if(localStorage.getItem("isLogged")==="LOGGED_IN")ee(r).then(v=>{r(!0);const u=v.find(c=>c.product.id===e.product.id);u?ae(r,u.cart_item_id,e.product.id,u.quantity+1).then(c=>{p(z.changeExistingItem(["increase",c.id]))}):te(r,e.product.id).then(c=>{p(z.addNewCartItem(c))})});else if(localStorage.getItem("isLogged")!=="LOGGED_IN"){const v=f.find(u=>u.product.id===e.product.id);p(v?z.changeExistingItem(["increase",e.product.id,"anonymous"]):z.addNewCartItem({quantity:1,product:e.product}))}},h=()=>{n(!0)},m=()=>{n(!1)};return d(k,{children:[d(le,{sx:{height:"300px",width:"250px",display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",backgroundColor:"#f8f9fa",borderRadius:"10px",border:"1px solid #96f2d7",fontSize:"14px"},elevation:2,children:[t(Y,{component:S,sx:{height:"120px",width:"120px","&:hover":{background:"none"}},onClick:h,disableRipple:!0,"aria-label":"Popup for more product info",children:t(O,{component:"img",src:e.product.image_url,alt:e.product.name,sx:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"20px"}})}),t(s,{item:!0,fontSize:"20px",textAlign:"start",children:`Handmade ${e.product.name}`}),d(s,{container:!0,width:"100%",justifyContent:"space-around",children:[t(s,{item:!0,children:`£${e.product.price}`}),t(s,{item:!0,children:"FREE UK delivery"})]}),d(s,{container:!0,width:"100%",justifyContent:"space-evenly",children:[t(X,{to:`/product/handmade-${e.product.name.toLowerCase().replaceAll(" ","-")}-${e.product.id}`,title:"Details",children:t(S,{variant:"contained","aria-label":`Button link to ${e.product.name} detail page`,children:"Details"})}),i?t(M,{}):t(S,{variant:"contained",onClick:o,"aria-label":`Add ${e.product.name} to cart`,children:"Add Cart"})]})]}),d(Z,{open:a,onClose:m,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",PaperProps:{sx:{height:"90%",maxWidth:"70%",display:"flex",flexDirection:"row",flex:"1 1 50%",borderRadius:"20px",justifyContent:"center",alignItems:"center"}},children:[t(O,{component:"img",image:e.product.image_url,alt:`Large ${e.product.name}`,sx:{height:"80%",width:"80vh",marginLeft:"4%",borderRadius:"20px"}}),d(ce,{sx:{height:"60vh",lineHeight:"1.5rem",display:"flex",justifyContent:"center",alignItems:"center"},children:[t(oe,{fontSize:30,children:"Quick Info"}),t("div",{children:"Handcrafted item"}),t("div",{children:"Dispatches from a small business in United Kingdom"}),t("div",{children:"Materials: copper"}),t("div",{children:"FREE UK delivery"}),t(se,{children:t(S,{onClick:m,size:"big","aria-label":"Close Popup",children:"Close"})})]})]})]})}function it(e){const[a,n]=b.useState([]),[i,r]=b.useState([]),[f,p]=b.useState(!1),[o,h]=b.useState({}),[m,P]=b.useState(1),[v,u]=b.useState(0),c=(g,l)=>{P(l)},C=E();return b.useEffect(()=>{const g=[...new Set(e.products.map(x=>x.catagory))].reduce((x,w)=>(x[w]=!1,x),{});h(g),n(e.products),r(e.products);const l=e.products.length/8;l===Number.isInteger(l)?u(l):u(Math.trunc(l)+1),C(ne.replaceShop(a))},[]),t(k,{children:t(ie,{children:d(s,{container:!0,height:"auto",width:1,justifyContent:"center",margin:"2rem 0 ",children:[t(s,{item:!0,container:!0,alignSelf:"start",flexDirection:"column",justifyContent:"start",alignContent:"center",xs:2,children:t(at,{catagoriesAllowed:o,setCatagoriesAllowed:h,products:a,setFilteredProducts:r})}),d(s,{item:!0,container:!0,flexDirection:"column",xs:10,justifyContent:"space-between",children:[d(s,{item:!0,container:!0,gap:2,justifyContent:"space-evenly",children:[!f&&a.filter(g=>{const l=(m-1)*6,x=l+6;return!o[g.catagory]&&i.indexOf(g)>=l&&i.indexOf(g)<x}).map((g,l)=>t(k,{children:t(nt,{product:g},g.id)})),f&&t(M,{size:"25rem",sx:{margin:"auto"}})]}),t(s,{item:!0,container:!0,justifyContent:"center",children:t(de,{count:v,page:m,onChange:c,shape:"rounded"})})]})]})})})}function rt(e){const a={justifyContent:"space-evenly",alignItems:"center",height:"20%",width:"100%"},n={width:"80%",fontSize:"12px"};return t(k,{children:d(s,{container:!0,flexDirection:"column",alignItems:"center",textAlign:"center",children:[t(s,{fontSize:16,children:"Filter Items"}),Object.keys(e.catagoriesAllowed).map(i=>{const r=i,f=e.catagoriesAllowed[i];return d(s,{container:!0,flexDirection:"column",sx:a,children:[t(s,{item:!0,sx:n,children:t(re,{inputProps:{"aria-label":`filter ${r} checkbox`},size:"small",checked:f,onChange:p=>{let o={...e.catagoriesAllowed};o[`${r}`]=p.target.checked,e.setCatagoriesAllowed({...o});const h=e.products.filter(m=>!{...o}[m.catagory]);e.setFilteredProducts([...h])}})}),t(s,{item:!0,children:r})]},r)})]})})}function ot(e){const[a,n]=b.useState(!1),[i,r]=b.useState(!1),f=J(v=>v.cart.cart),p=E(),o=()=>{if(localStorage.getItem("isLogged")==="LOGGED_IN")ee(r).then(v=>{r(!0);const u=v.find(c=>c.product.id===e.product.id);u?ae(r,u.cart_item_id,e.product.id,u.quantity+1).then(c=>{p(z.changeExistingItem(["increase",c.id]))}):te(r,e.product.id).then(c=>{p(z.addNewCartItem(c))})});else if(localStorage.getItem("isLogged")!=="LOGGED_IN"){const v=f.find(u=>u.product.id===e.product.id);p(v?z.changeExistingItem(["increase",e.product.id,"anonymous"]):z.addNewCartItem({quantity:1,product:e.product}))}},h=()=>{n(!0)},m=()=>{n(!1)};return d(k,{children:[t(s,{item:!0,sx:{flex:"0 0 50%"},children:d(le,{sx:{height:"250px",display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",backgroundColor:"#f8f9fa",border:"1px solid #96f2d7",fontSize:"10px"},elevation:2,children:[t(Y,{component:S,sx:{height:"80px",width:"100px","&:hover":{background:"none"}},onClick:h,disableRipple:!0,"aria-label":"Popup for more product info",children:t(O,{component:"img",src:e.product.image_url,alt:e.product.name,sx:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"10px"}})}),t(s,{item:!0,fontSize:"14px",textAlign:"start",children:`Handmade ${e.product.name}`}),d(s,{container:!0,width:"100%",justifyContent:"space-around",children:[t(s,{item:!0,children:`£${e.product.price}`}),t(s,{item:!0,children:"FREE UK delivery"})]}),d(s,{container:!0,justifyContent:"center",gap:2,children:[t(X,{to:`/product/handmade-${e.product.name.toLowerCase().replaceAll(" ","-")}-${e.product.id}`,title:"Details",children:t(S,{variant:"contained",size:"small","aria-label":`Button link to ${e.product.name} detail page`,children:"Details"})}),t(s,{item:!0,children:i?t(M,{}):t(S,{size:"small",variant:"contained",onClick:o,"aria-label":`Add ${e.product.name} to cart`,endIcon:d(Ie,{version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"20.000000pt",height:"20.000000pt",viewBox:"0 0 30.000000 30.000000",preserveAspectRatio:"xMidYMid meet","aria-labelledby":"cartTitle cartDesc",children:[t("title",{id:"cartTitle",children:"Cart Icon"}),t("desc",{id:"cartDesc",children:"A black coloured illustration of a shopping trolley."}),d("g",{transform:"translate(0.000000,30.000000) scale(0.100000,-0.100000)",fill:"#C1FAA2",stroke:"none",children:[t("path",{d:`M10 271 c0 -5 7 -11 16 -13 11 -2 26 -31 43 -83 l26 -80 73 -3 73 -3\r
          13 33 c8 18 17 48 21 66 l7 32 -106 0 c-95 0 -106 2 -106 18 0 10 -5 23 -12\r
          30 -14 14 -48 16 -48 3z m208 -113 c-3 -20 -9 -23 -48 -23 -39 0 -45 3 -48 23\r
          -3 20 0 22 48 22 48 0 51 -2 48 -22z`}),t("path",{d:`M104 59 c-10 -17 13 -36 27 -22 12 12 4 33 -11 33 -5 0 -12 -5 -16\r
          -11z`}),t("path",{d:`M204 59 c-10 -17 13 -36 27 -22 12 12 4 33 -11 33 -5 0 -12 -5 -16\r
          -11z`})]})]}),children:"Add Cart"})})]})]})}),d(Z,{open:a,onClose:m,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",PaperProps:{sx:{height:"90%",maxWidth:"70%",display:"flex",flexDirection:"row",flex:"1 1 50%",borderRadius:"20px",justifyContent:"center",alignItems:"center"}},children:[t(O,{component:"img",image:e.product.image_url,alt:`Large ${e.product.name}`,sx:{height:"80%",width:"80vh",marginLeft:"4%",borderRadius:"20px"}}),d(ce,{sx:{height:"60vh",lineHeight:"1.5rem",display:"flex",justifyContent:"center",alignItems:"center"},children:[t(oe,{fontSize:30,children:"Quick Info"}),t("div",{children:"Handcrafted item"}),t("div",{children:"Dispatches from a small business in United Kingdom"}),t("div",{children:"Materials: copper"}),t("div",{children:"FREE UK delivery"}),t(se,{children:t(S,{onClick:m,size:"big","aria-label":"Close Popup",children:"Close"})})]})]})]})}function st(e){const[a,n]=b.useState([]),[i,r]=b.useState([]),[f,p]=b.useState(!1),[o,h]=b.useState({}),[m,P]=b.useState(1),[v,u]=b.useState(0),c=(g,l)=>{P(l)},C=E();return b.useEffect(()=>{const g=[...new Set(e.products.map(x=>x.catagory))].reduce((x,w)=>(x[w]=!1,x),{});h(g),n(e.products),r(e.products);const l=e.products.length/8;l===Number.isInteger(l)?u(l):u(Math.trunc(l)+1),C(ne.replaceShop(a))},[]),t(k,{children:t(ie,{children:d(s,{container:!0,height:"auto",width:1,justifyContent:"center",margin:"2rem 0 ",children:[t(s,{item:!0,container:!0,alignSelf:"start",flexDirection:"column",justifyContent:"start",alignContent:"center",xs:2,children:t(rt,{catagoriesAllowed:o,setCatagoriesAllowed:h,products:a,setFilteredProducts:r})}),d(s,{item:!0,container:!0,flex:1,flexDirection:"column",children:[d(s,{item:!0,container:!0,justifyContent:"start",alignItems:"start",padding:"0 0 48px 0",flexWrap:"wrap",children:[!f&&a.filter(g=>{const l=(m-1)*8,x=l+8;return!o[g.catagory]&&i.indexOf(g)>=l&&i.indexOf(g)<x}).map(g=>t(ot,{product:g},g.id)),f&&t(M,{size:"25rem",sx:{margin:"auto"}})]}),t(s,{item:!0,container:!0,justifyContent:"center",children:t(de,{count:v,page:m,onChange:c,shape:"rounded"})})]})]})})})}function vt(){const{products:e}=Pe(),a=we();return t(b.Suspense,{fallback:t(M,{size:"25rem",sx:{margin:"auto"}}),children:t($e,{resolve:e,children:n=>d(k,{children:[a.isDesktop&&t(tt,{products:n}),a.isTablet&&t(it,{products:n}),a.isMobile&&t(st,{products:n})]})})})}async function ct(){const e=await fetch(`${ze}/api/shop/products/`,{method:"GET",headers:{"Content-type":"application/json"}});if(e.ok)return await e.json();throw ke({message:"Could not fetch products"},{status:e.status})}function Ct(){return Se({products:ct()})}export{vt as default,Ct as loader};
