import{a as G,g as T,k as M,P as ot,r as C,u as W,e as E,_ as b,j as e,h as F,i as H,v as it,w as U,x as nt,b as w,y as st,f as P,c as A,z as rt,C as Z,F as V,o as lt,B as D,L as ct,D as dt,E as ut,H as pt,I as j,J as gt,G as N,K as ft,q as vt,A as ht,s as bt,M as mt,t as xt}from"./index-00eef744.js";import{C as K,D as Ct,a as yt}from"./DialogTitle-c2385c56.js";import{C as q}from"./CircularProgress-8aa7d9f1.js";import{D as Pt}from"./DialogContent-2d643589.js";import{A as $t}from"./AnimatedPage-3373bc9a.js";import{C as It}from"./Checkbox-9a1efe2d.js";import"./motion-f23bde24.js";import"./SwitchBase-b0663c0e.js";import"./useFormControl-fc4a0e55.js";function zt(t){return G("MuiCard",t)}T("MuiCard",["root"]);const Nt=["className","raised"],_t=t=>{const{classes:a}=t;return H({root:["root"]},zt,a)},kt=M(ot,{name:"MuiCard",slot:"Root",overridesResolver:(t,a)=>a.root})(()=>({overflow:"hidden"})),Lt=C.forwardRef(function(a,o){const i=W({props:a,name:"MuiCard"}),{className:s,raised:u=!1}=i,p=E(i,Nt),n=b({},i,{raised:u}),c=_t(n);return e(kt,b({className:F(c.root,s),elevation:u?8:void 0,ref:o,ownerState:n},p))}),Rt=Lt;function wt(t){return G("MuiPagination",t)}T("MuiPagination",["root","ul","outlined","text"]);const Mt=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function Ot(t={}){const{boundaryCount:a=1,componentName:o="usePagination",count:i=1,defaultPage:s=1,disabled:u=!1,hideNextButton:p=!1,hidePrevButton:n=!1,onChange:c,page:v,showFirstButton:z=!1,showLastButton:x=!1,siblingCount:g=1}=t,r=E(t,Mt),[d,m]=it({controlled:v,default:s,name:o,state:"page"}),h=(l,L)=>{v||m(L),c&&c(l,L)},f=(l,L)=>{const at=L-l+1;return Array.from({length:at},(aa,et)=>l+et)},_=f(1,Math.min(a,i)),$=f(Math.max(i-a+1,a+1),i),O=Math.max(Math.min(d-g,i-a-g*2-1),a+2),R=Math.min(Math.max(d+g,a+g*2+2),$.length>0?$[0]-2:i-1),S=[...z?["first"]:[],...n?[]:["previous"],..._,...O>a+2?["start-ellipsis"]:a+1<i-a?[a+1]:[],...f(O,R),...R<i-a-1?["end-ellipsis"]:i-a>a?[i-a]:[],...$,...p?[]:["next"],...x?["last"]:[]],B=l=>{switch(l){case"first":return 1;case"previous":return d-1;case"next":return d+1;case"last":return i;default:return null}},k=S.map(l=>typeof l=="number"?{onClick:L=>{h(L,l)},type:"page",page:l,selected:l===d,disabled:u,"aria-current":l===d?"true":void 0}:{onClick:L=>{h(L,B(l))},type:l,page:B(l),selected:!1,disabled:u||l.indexOf("ellipsis")===-1&&(l==="next"||l==="last"?d>=i:d<=1)});return b({items:k},r)}function St(t){return G("MuiPaginationItem",t)}const Bt=T("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon"]),y=Bt,J=U(e("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),Q=U(e("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),X=U(e("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),Y=U(e("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),At=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],tt=(t,a)=>{const{ownerState:o}=t;return[a.root,a[o.variant],a[`size${A(o.size)}`],o.variant==="text"&&a[`text${A(o.color)}`],o.variant==="outlined"&&a[`outlined${A(o.color)}`],o.shape==="rounded"&&a.rounded,o.type==="page"&&a.page,(o.type==="start-ellipsis"||o.type==="end-ellipsis")&&a.ellipsis,(o.type==="previous"||o.type==="next")&&a.previousNext,(o.type==="first"||o.type==="last")&&a.firstLast]},Dt=t=>{const{classes:a,color:o,disabled:i,selected:s,size:u,shape:p,type:n,variant:c}=t,v={root:["root",`size${A(u)}`,c,p,o!=="standard"&&`${c}${A(o)}`,i&&"disabled",s&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[n]],icon:["icon"]};return H(v,St,a)},jt=M("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:tt})(({theme:t,ownerState:a})=>b({},t.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,height:"auto",[`&.${y.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},a.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},a.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:t.typography.pxToRem(15)})),Ft=M(nt,{name:"MuiPaginationItem",slot:"Root",overridesResolver:tt})(({theme:t,ownerState:a})=>b({},t.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,[`&.${y.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${y.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},transition:t.transitions.create(["color","background-color"],{duration:t.transitions.duration.short}),"&:hover":{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${y.selected}`]:{backgroundColor:(t.vars||t).palette.action.selected,"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selected} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:w(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(t.vars||t).palette.action.selected}},[`&.${y.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selected} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:w(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},[`&.${y.disabled}`]:{opacity:1,color:(t.vars||t).palette.action.disabled,backgroundColor:(t.vars||t).palette.action.selected}}},a.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},a.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:t.typography.pxToRem(15)},a.shape==="rounded"&&{borderRadius:(t.vars||t).shape.borderRadius}),({theme:t,ownerState:a})=>b({},a.variant==="text"&&{[`&.${y.selected}`]:b({},a.color!=="standard"&&{color:(t.vars||t).palette[a.color].contrastText,backgroundColor:(t.vars||t).palette[a.color].main,"&:hover":{backgroundColor:(t.vars||t).palette[a.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[a.color].main}},[`&.${y.focusVisible}`]:{backgroundColor:(t.vars||t).palette[a.color].dark}},{[`&.${y.disabled}`]:{color:(t.vars||t).palette.action.disabled}})},a.variant==="outlined"&&{border:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${y.selected}`]:b({},a.color!=="standard"&&{color:(t.vars||t).palette[a.color].main,border:`1px solid ${t.vars?`rgba(${t.vars.palette[a.color].mainChannel} / 0.5)`:w(t.palette[a.color].main,.5)}`,backgroundColor:t.vars?`rgba(${t.vars.palette[a.color].mainChannel} / ${t.vars.palette.action.activatedOpacity})`:w(t.palette[a.color].main,t.palette.action.activatedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[a.color].mainChannel} / calc(${t.vars.palette.action.activatedOpacity} + ${t.vars.palette.action.focusOpacity}))`:w(t.palette[a.color].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${y.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[a.color].mainChannel} / calc(${t.vars.palette.action.activatedOpacity} + ${t.vars.palette.action.focusOpacity}))`:w(t.palette[a.color].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity)}},{[`&.${y.disabled}`]:{borderColor:(t.vars||t).palette.action.disabledBackground,color:(t.vars||t).palette.action.disabled}})})),Et=M("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(t,a)=>a.icon})(({theme:t,ownerState:a})=>b({fontSize:t.typography.pxToRem(20),margin:"0 -8px"},a.size==="small"&&{fontSize:t.typography.pxToRem(18)},a.size==="large"&&{fontSize:t.typography.pxToRem(22)})),Ut=C.forwardRef(function(a,o){const i=W({props:a,name:"MuiPaginationItem"}),{className:s,color:u="standard",component:p,components:n={},disabled:c=!1,page:v,selected:z=!1,shape:x="circular",size:g="medium",slots:r={},type:d="page",variant:m="text"}=i,h=E(i,At),f=b({},i,{color:u,disabled:c,selected:z,shape:x,size:g,type:d,variant:m}),_=st(),$=Dt(f),R=(_.direction==="rtl"?{previous:r.next||n.next||Y,next:r.previous||n.previous||X,last:r.first||n.first||J,first:r.last||n.last||Q}:{previous:r.previous||n.previous||X,next:r.next||n.next||Y,first:r.first||n.first||J,last:r.last||n.last||Q})[d];return d==="start-ellipsis"||d==="end-ellipsis"?e(jt,{ref:o,ownerState:f,className:F($.root,s),children:"…"}):P(Ft,b({ref:o,ownerState:f,component:p,disabled:c,className:F($.root,s)},h,{children:[d==="page"&&v,R?e(Et,{as:R,ownerState:f,className:$.icon}):null]}))}),Gt=Ut,Tt=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],Wt=t=>{const{classes:a,variant:o}=t;return H({root:["root",o],ul:["ul"]},wt,a)},Ht=M("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:o}=t;return[a.root,a[o.variant]]}})({}),Vt=M("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(t,a)=>a.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function qt(t,a,o){return t==="page"?`${o?"":"Go to "}page ${a}`:`Go to ${t} page`}const Kt=C.forwardRef(function(a,o){const i=W({props:a,name:"MuiPagination"}),{boundaryCount:s=1,className:u,color:p="standard",count:n=1,defaultPage:c=1,disabled:v=!1,getItemAriaLabel:z=qt,hideNextButton:x=!1,hidePrevButton:g=!1,renderItem:r=k=>e(Gt,b({},k)),shape:d="circular",showFirstButton:m=!1,showLastButton:h=!1,siblingCount:f=1,size:_="medium",variant:$="text"}=i,O=E(i,Tt),{items:R}=Ot(b({},i,{componentName:"Pagination"})),S=b({},i,{boundaryCount:s,color:p,count:n,defaultPage:c,disabled:v,getItemAriaLabel:z,hideNextButton:x,hidePrevButton:g,renderItem:r,shape:d,showFirstButton:m,showLastButton:h,siblingCount:f,size:_,variant:$}),B=Wt(S);return e(Ht,b({"aria-label":"pagination navigation",className:F(B.root,u),ownerState:S,ref:o},O,{children:e(Vt,{className:B.ul,ownerState:S,children:R.map((k,l)=>e("li",{children:r(b({},k,{color:p,"aria-label":z(k.type,k.page,k.selected),shape:d,size:_,variant:$}))},l))})}))}),Jt=Kt,Qt="_card_zb6hd_25",I={card:Qt,"card-container":"_card-container_zb6hd_43","card-img":"_card-img_zb6hd_77","card-info":"_card-info_zb6hd_91","card-price":"_card-price_zb6hd_101","card-delivery":"_card-delivery_zb6hd_109","btn-purchase":"_btn-purchase_zb6hd_119","dialog-container":"_dialog-container_zb6hd_139"};function Xt(t){const[a,o]=C.useState(!1),[i,s]=C.useState(!1),u=rt(x=>x.cart.cart),p=Z(),n=()=>{if(localStorage.getItem("isLogged")==="LOGGED_IN")ut(s).then(x=>{s(!0);const g=x.find(r=>r.product.id===t.product.id);g?gt(s,g.cart_item_id,t.product.id,g.quantity+1).then(r=>{p(j.changeExistingItem(["increase",r.id]))}):pt(s,t.product.id).then(r=>{p(j.addNewCartItem(r))})});else if(localStorage.getItem("isLogged")!=="LOGGED_IN"){const x=u.find(g=>g.product.id===t.product.id);p(x?j.changeExistingItem(["increase",t.product.id,"anonymous"]):j.addNewCartItem({quantity:1,product:t.product}))}},c=()=>{o(!0)},v=()=>{o(!1)};return P(V,{children:[e(Rt,{sx:{height:"350px",width:"250px",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#f8f9fa",borderRadius:"10px",border:"1px solid #96f2d7"},elevation:2,children:P("div",{className:I["card-container"],children:[e(lt,{component:D,sx:{height:"100%",width:"100%",gridArea:"img","&:hover":{background:"none"}},onClick:c,disableRipple:!0,"aria-label":"Popup for more product info",children:e(K,{component:"img",height:"140",width:"184",src:t.product.image_url,alt:t.product.name,sx:{borderRadius:"20px"}})}),e("div",{className:I["card-info"],children:`Handmade ${t.product.name}`}),e("div",{className:I["card-price"],children:`£${t.product.price}`}),e("div",{className:I["card-delivery"],children:"FREE UK delivery"}),P("div",{className:I["btn-purchase"],children:[e(ct,{to:`/product/handmade-${t.product.name.toLowerCase().replaceAll(" ","-")}-${t.product.id}`,title:"Details",children:e(D,{variant:"contained",size:"big","aria-label":`Button link to ${t.product.name} detail page`,children:"Details"})}),i?e(q,{}):e(D,{variant:"contained",size:"medium",onClick:n,"aria-label":`Add ${t.product.name} to cart`,children:"Add Cart"})]})]})}),P(dt,{open:a,onClose:v,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",PaperProps:{sx:{height:"90%",maxWidth:"70%",display:"flex",flexDirection:"row",flex:"1 1 50%",borderRadius:"20px",justifyContent:"center",alignItems:"center"}},children:[e(K,{component:"img",image:t.product.image_url,alt:`Large ${t.product.name}`,sx:{height:"80%",width:"80vh",marginLeft:"4%",borderRadius:"20px"}}),e(Pt,{sx:{height:"60vh",lineHeight:"1.5rem",display:"flex",justifyContent:"center",alignItems:"center"},children:P("div",{className:I["dialog-container"],children:[e(Ct,{fontSize:30,children:"Quick Info"}),e("div",{className:I["dialog-item"],children:"Handcrafted item"}),e("div",{className:I["dialog-item"],children:"Dispatches from a small business in United Kingdom"}),e("div",{className:I["dialog-item"],children:"Materials: copper"}),e("div",{className:I["dialog-item"],children:"FREE UK delivery"}),e(yt,{children:e(D,{onClick:v,size:"big","aria-label":"Close Popup",children:"Close"})})]})})]})]})}function Yt(t){const a={justifyContent:"space-evenly",alignItems:"center",height:"20%",width:"100%"},o={width:"80%",fontSize:"20px"};return e(V,{children:e(N,{item:!0,container:!0,alignSelf:"start",flexDirection:"column",justifyContent:"start",alignContent:"center",xs:2,children:P(N,{container:!0,flexDirection:"column",height:.5,width:.9,children:[e(N,{fontSize:30,textAlign:"center",padding:"20px 0 40px",children:"Filter Items"}),Object.keys(t.catagoriesAllowed).map(i=>{const s=i,u=t.catagoriesAllowed[i];return e(N,{container:!0,sx:a,children:P(N,{item:!0,sx:o,children:[e(It,{inputProps:{"aria-label":`filter ${s} checkbox`},checked:u,onChange:p=>{let n={...t.catagoriesAllowed};n[`${s}`]=p.target.checked,t.setCatagoriesAllowed({...n});const c=t.products.filter(v=>!{...n}[v.catagory]);t.setFilteredProducts([...c])}}),s]})},s)})]})})})}function Zt(t){const[a,o]=C.useState([]),[i,s]=C.useState([]),[u,p]=C.useState(!1),[n,c]=C.useState({}),[v,z]=C.useState(1),[x,g]=C.useState(0),r=(m,h)=>{z(h)},d=Z();return C.useEffect(()=>{const m=[...new Set(t.products.map(f=>f.catagory))].reduce((f,_)=>(f[_]=!1,f),{});c(m),o(t.products),s(t.products);const h=t.products.length/8;h===Number.isInteger(h)?g(h):g(Math.trunc(h)+1),d(ft.replaceShop(a))},[]),e(V,{children:e($t,{children:P(N,{container:!0,height:"auto",width:1,justifyContent:"center",margin:"2rem 0 ",children:[e(Yt,{catagoriesAllowed:n,setCatagoriesAllowed:c,products:a,setFilteredProducts:s}),P(N,{item:!0,container:!0,width:.8,xs:9,flexDirection:"column",children:[P(N,{item:!0,container:!0,gap:2,justifyContent:"start",alignItems:"start",padding:"0 0 48px 0",children:[!u&&a.filter(m=>{const h=(v-1)*8,f=h+8;return!n[m.catagory]&&i.indexOf(m)>=h&&i.indexOf(m)<f}).map(m=>e(Xt,{product:m},m.id)),u&&e(q,{size:"25rem",sx:{margin:"auto"}})]}),e(N,{item:!0,container:!0,justifyContent:"center",children:e(Jt,{count:x,page:v,onChange:r,shape:"rounded"})})]})]})})})}function ua(){const{products:t}=vt();return e(C.Suspense,{fallback:e(q,{size:"25rem",sx:{margin:"auto"}}),children:e(ht,{resolve:t,children:a=>e(Zt,{products:a})})})}async function ta(){const t=await fetch(`${mt}/api/shop/products/`,{method:"GET",headers:{"Content-type":"application/json"}});if(t.ok)return await t.json();throw xt({message:"Could not fetch products"},{status:t.status})}function pa(){return bt({products:ta()})}export{ua as default,pa as loader};
