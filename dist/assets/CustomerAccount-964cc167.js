import{e as k,g as P,s as A,r,u as T,k as I,_ as y,j as t,m as $,n as O,J as K,b as o,T as z,U as q,V as H,d as U,F as D,B as _,D as V,G as i,o as J,x as Y,at as X,y as j,C as w,R as Z,L as ee}from"./index-ac7c6a5f.js";import{A as te}from"./ag-theme-material-88b819b9.js";import{g as ie}from"./OrderAPI-2ca18c98.js";import{D as F}from"./DialogContent-83232269.js";import{C as ne,D as oe,a as ae}from"./CardMedia-40c664d4.js";import{C as le}from"./CircularProgress-a4941f1d.js";import"./index-75474c07.js";function re(e){return k("MuiBottomNavigation",e)}P("MuiBottomNavigation",["root"]);const se=["children","className","component","onChange","showLabels","value"],ce=e=>{const{classes:n}=e;return O({root:["root"]},re,n)},de=A("div",{name:"MuiBottomNavigation",slot:"Root",overridesResolver:(e,n)=>n.root})(({theme:e})=>({display:"flex",justifyContent:"center",height:56,backgroundColor:(e.vars||e).palette.background.paper})),ue=r.forwardRef(function(n,l){const a=T({props:n,name:"MuiBottomNavigation"}),{children:s,className:h,component:c="div",onChange:p,showLabels:f=!1,value:g}=a,v=I(a,se),u=y({},a,{component:c,showLabels:f}),x=ce(u);return t(de,y({as:c,className:$(x.root,h),ref:l,ownerState:u},v,{children:r.Children.map(s,(m,b)=>{if(!r.isValidElement(m))return null;const C=m.props.value===void 0?b:m.props.value;return r.cloneElement(m,{selected:C===g,showLabel:m.props.showLabel!==void 0?m.props.showLabel:f,value:C,onChange:p})})}))}),me=ue;function he(e){return k("MuiBottomNavigationAction",e)}const fe=P("MuiBottomNavigationAction",["root","iconOnly","selected","label"]),E=fe,ge=["className","icon","label","onChange","onClick","selected","showLabel","value"],pe=e=>{const{classes:n,showLabel:l,selected:a}=e;return O({root:["root",!l&&!a&&"iconOnly",a&&"selected"],label:["label",!l&&!a&&"iconOnly",a&&"selected"]},he,n)},ve=A(K,{name:"MuiBottomNavigationAction",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:l}=e;return[n.root,!l.showLabel&&!l.selected&&n.iconOnly]}})(({theme:e,ownerState:n})=>y({transition:e.transitions.create(["color","padding-top"],{duration:e.transitions.duration.short}),padding:"0px 12px",minWidth:80,maxWidth:168,color:(e.vars||e).palette.text.secondary,flexDirection:"column",flex:"1"},!n.showLabel&&!n.selected&&{paddingTop:14},!n.showLabel&&!n.selected&&!n.label&&{paddingTop:0},{[`&.${E.selected}`]:{color:(e.vars||e).palette.primary.main}})),xe=A("span",{name:"MuiBottomNavigationAction",slot:"Label",overridesResolver:(e,n)=>n.label})(({theme:e,ownerState:n})=>y({fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(12),opacity:1,transition:"font-size 0.2s, opacity 0.2s",transitionDelay:"0.1s"},!n.showLabel&&!n.selected&&{opacity:0,transitionDelay:"0s"},{[`&.${E.selected}`]:{fontSize:e.typography.pxToRem(14)}})),be=r.forwardRef(function(n,l){const a=T({props:n,name:"MuiBottomNavigationAction"}),{className:s,icon:h,label:c,onChange:p,onClick:f,value:g}=a,v=I(a,ge),u=a,x=pe(u),m=b=>{p&&p(b,g),f&&f(b)};return o(ve,y({ref:l,className:$(x.root,s),focusRipple:!0,onClick:m,ownerState:u},v,{children:[h,t(xe,{className:x.label,ownerState:u,children:c})]}))}),L=be;var B={},ye=q;Object.defineProperty(B,"__esModule",{value:!0});var W=B.default=void 0,Ce=ye(z()),_e=H,De=(0,Ce.default)((0,_e.jsx)("path",{d:"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"}),"ShoppingCart");W=B.default=De;var S={},Ne=q;Object.defineProperty(S,"__esModule",{value:!0});var Q=S.default=void 0,Me=Ne(z()),we=H,Re=(0,Me.default)((0,we.jsx)("path",{d:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9 1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"}),"LocalShipping");Q=S.default=Re;function Ae(e){return t(U,{sx:{width:e.isMobile?"100%":500},children:o(me,{showLabels:!0,value:e.navValue,onChange:(n,l)=>{e.setNavValue(l)},children:[t(L,{label:"Cart",icon:t(W,{})}),t(L,{label:"Orders",icon:t(Q,{})})]})})}function R(e){return e.reduce((l,a)=>{const s=Number((Number(a.product.price)*a.quantity).toFixed(2));return l+s},0)}function Be(e){const[n,l]=r.useState(!1),a=()=>{l(!0)},s=()=>{l(!1)},h=R(e.data.order);return o(D,{children:[t(_,{variant:"contained",onClick:()=>{a()},"aria-label":"Order detail",children:e.isMobile?"Detail":"Order details"}),t(V,{open:n,onClose:s,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",PaperProps:{sx:{height:"90%",maxWidth:"70%",display:"flex",flexDirection:"row",borderRadius:"20px",justifyContent:"center",alignItems:"center",background:"#e7f5ff"}},children:t(F,{sx:{height:"90%",lineHeight:"1.5rem",display:"flex",justifyContent:"center",alignItems:"center"},children:o(i,{container:!0,sx:{width:"100%"},children:[o(i,{container:!0,flexDirection:"Column",textAlign:"center",children:[t(i,{children:"AmeyShopUk"}),t(i,{children:"Thank you for ordering!"})]}),o(i,{container:!0,flexDirection:"column",width:"50%",marginBottom:"1rem",children:[t(i,{item:!0,children:"Personal Information"}),t(i,{item:!0,children:`${e.data.personal_info_used.first_name} ${e.data.personal_info_used.last_name}`}),t(i,{item:!0,children:e.data.personal_info_used.email}),t(i,{item:!0,children:e.data.personal_info_used.phone_number})]}),o(i,{container:!0,flexDirection:"column",width:"50%",textAlign:"end",height:"30%",marginBottom:"1rem",children:[t(i,{item:!0,children:"Delivery Information"}),t(i,{item:!0,children:e.data.personal_info_used.address.replace("#","")}),t(i,{item:!0,children:e.data.personal_info_used.city}),t(i,{item:!0,children:e.data.personal_info_used.post_code})]}),o(i,{container:!0,flexDirection:"column",children:[o(i,{container:!0,width:"space-between",marginBottom:"1rem",children:[o(i,{container:!0,flexDirection:"column",width:"50%",children:[t(i,{item:!0,children:"Payment Method"}),t(i,{item:!0,children:"Paypal"})]}),o(i,{container:!0,flexDirection:"column",width:"50%",textAlign:"end",children:[t(i,{item:!0,children:"Delivery Type"}),t(i,{item:!0,children:e.data.personal_info_used.delivery_type})]})]}),t(i,{container:!0,children:o(i,{container:!0,flexDirection:"column",children:[o(i,{container:!0,justifyContent:"space-between",textAlign:"end",children:[t(i,{item:!0,flex:"1",textAlign:"start",children:"Items"}),t(i,{item:!0,flex:"1",children:"Qty"}),t(i,{item:!0,flex:"1",children:"Price"})]}),e.data.order.map(c=>o(i,{container:!0,justifyContent:"space-between",textAlign:"end",children:[o(i,{item:!0,flex:"1",textAlign:"start",children:["Handmade ",c.product.name]}),t(i,{item:!0,flex:"1",children:c.quantity}),o(i,{item:!0,flex:"1",children:["£",(c.quantity*c.product.price).toFixed(2)]})]})),o(i,{container:!0,justifyContent:"space-between",textAlign:"end",children:[t(i,{item:!0,flex:"1",textAlign:"start"}),t(i,{item:!0,flex:"1",children:"Total Amount:"}),o(i,{item:!0,flex:"1",children:["£",h]})]}),t(i,{container:!0,justifyContent:"center",textAlign:"Center",marginTop:"2rem",children:"Your Delivery Instructions!"}),t(i,{container:!0,justifyContent:"center",children:e.data.delivery_instructions})]})})]})]})})})]})}function Se(e){const[n,l]=r.useState(!1),a=()=>{l(!0)},s=()=>{l(!1)},h={height:"100%",width:"100%",textAlign:"center",display:"flex",flexDirection:"column",fontSize:"18px",justifyContent:"space-evenly",alignItems:"center"};return o(D,{children:[e.value!==""&&t(_,{variant:"contained",onClick:()=>{a()},"aria-label":"Product Detail",children:e.isMobile?"Details":"Product Details"}),o(V,{open:n,onClose:s,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",PaperProps:{sx:{height:"90%",maxWidth:"70%",display:"flex",flexDirection:"row",flex:"1 1 50%",borderRadius:"20px",justifyContent:"center",alignItems:"center"}},children:[t(ne,{component:"img",image:e.value.image_url,alt:e.value.catagory,sx:{height:"80%",width:"80vh",marginLeft:"4%",borderRadius:"20px"}}),t(F,{sx:{height:"60vh",lineHeight:"1.5rem",display:"flex",justifyContent:"center",alignItems:"center"},children:o(i,{sx:h,children:[t(oe,{fontSize:30,children:"Quick Info "}),t(i,{children:"Handmade item "}),t(i,{children:"Handmade item Dispatches from a small business in United Kingdom"}),t(i,{children:"Materials: copper"}),t(i,{children:"FREE UK delivery"}),t(ae,{children:t(_,{onClick:s,size:"big",children:"Close"})})]})})]})]})}function je(e){return t(D,{children:o("div",{children:[e.value===void 0&&`£${(e.data.quantity*Number(e.data.product.price)).toFixed(2)}`,e.value!==void 0&&(e.value===""?"":e.isMobile?`Total £${e.value}`:`Total amount : £${e.value}`)]})})}function ze(){const e=J(),n=[{field:"cart_item_id",headerName:e.isMobile?"id":"Cart item id"},{field:"product",cellRenderer:Se,cellRendererParams:{isMobile:e.isMobile}},{field:"quantity",headerName:e.isMobile?"Qt":"Quantity"},{field:"total price",headerName:e.isMobile?"Total":"Total Price",cellRenderer:je,cellRendererParams:{isMobile:e.isMobile}}],l=[{field:"id",headerName:e.isMobile?"id":"Order id",flex:e.isMobile?1.2:1},{field:"order detail",headerName:e.isMobile?"Detail":"Order Detail",cellRenderer:Be,cellRendererParams:{isMobile:e.isMobile},flex:e.isMobile?1.5:1},{field:"date_ordered",headerName:e.isMobile?"Date":"Date Ordered",flex:e.isMobile?2:1},{field:"delivery_status",headerName:e.isMobile?"Status":"Delivery Status",flex:e.isMobile?2:1}],[a,s]=r.useState(0),[h,c]=r.useState(!1),[p,f]=r.useState(),[g,v]=r.useState(n),u=Y(),x=X(),m=r.useRef(),b=r.useMemo(()=>({sortable:!0,filter:!0,resizable:!0,flex:1})),C=r.useCallback(d=>{console.log("cellClicked",d)},[]);a===0&&g[0].field!=="cart_item_id"?(v(n),j(c).then(d=>{const N=R(d);u(w.replaceCart(d));const M={cart_item_id:"",product:"",quantity:"","total price":d.length===0?"":N};f([...d,M])})):a===1&&g[0].field!=="id"&&(v(l),ie(c).then(d=>{f([...d])})),r.useEffect(()=>{j(c).then(d=>{const N=R(d);u(w.replaceCart(d));const M={cart_item_id:"",product:"",quantity:"","total price":N};f([...d,M])})},[]);function G(){localStorage.removeItem("Token"),localStorage.removeItem("username"),localStorage.removeItem("isLogged"),localStorage.removeItem("user_id"),localStorage.removeItem("user_status"),x("/account/login/",{replace:!0}),u(w.replaceCart([]))}return t(D,{children:h?t(i,{container:!0,justifyContent:"center",children:t(le,{size:"25rem",sx:{margin:"auto"}})}):t(U,{height:"100vh",children:t(Z,{maxWidth:"lg",children:o(i,{padding:"2rem 0",container:!0,flexDirection:"column",justifyContent:"center",alignItems:"center",gap:2,children:[o(i,{item:!0,justifyContent:"center",children:["Welcome back, ",localStorage.getItem("username")]}),t(Ae,{setNavValue:s,navValue:a,isDesktop:e.isDesktop,isTablet:e.isTablet,isMobile:e.isMobile}),t("div",{className:"ag-theme-material",style:{width:e.isMobile?"100%":800,height:500},children:t(te,{ref:m,rowData:p,columnDefs:g,animateRows:!0,rowSelection:"multiple",onCellClicked:C,defaultColDef:b})}),t(i,{item:!0,container:!0,justifyContent:"center",width:"75vw",children:t(_,{variant:"contained",component:ee,to:"/account/login",onClick:G,children:"Log out"})})]})})})})}export{ze as default};
