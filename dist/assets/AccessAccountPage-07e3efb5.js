import{t as I,r as m,at as _,au as j,j as e,F as C,o as x,G as t,f as s,B as D,L as g,p as k}from"./index-5b29e5bf.js";import{C as L}from"./CircularProgress-6aea0428.js";import{T as p}from"./TextField-ab76fe35.js";import"./useFormControl-5b3c9049.js";async function w(o,c,l){o(!0);let r=await fetch(`${I}/api/user/token/`,{method:"POST",body:JSON.stringify({email:c,password:l}),headers:{"Content-type":"application/json"}});if(r.ok){let u=await r.json();return localStorage.setItem("Token",u.token),localStorage.setItem("isLogged","LOGGED_IN"),r=await fetch(`${I}/api/user/me/`,{method:"GET",headers:{"Content-type":"application/json",Authorization:`Token ${u.token}`}}),r.ok?(u=await r.json(),o(!1),u):(o(!1),"error")}else return o(!1),"error"}async function P(o,c,l,r){o(!0);const S=await(await fetch(`${I}/api/user/create/`,{method:"POST",body:JSON.stringify({name:c,email:l,password:r}),headers:{"Content-type":"application/json"}})).json();console.log(S),o(!1)}function z(o){return o.split("_").map(r=>r[0].toUpperCase()+r.substring(1)).join(" ")}function N(){const[o,c]=m.useState(""),[l,r]=m.useState(""),[u,S]=m.useState(""),[y,d]=m.useState(!1),f=_(),v=j(),a=z(v.accessType),b=async n=>{if(n.preventDefault(),a==="Login"){const i=await w(d,l,u);if(i!=="error"){i.user_status==="member"?localStorage.setItem("username",i.name):i.user_status==="staff"&&localStorage.setItem("username",i.email);const h=localStorage.getItem("username");localStorage.setItem("user_id",i.user_id),localStorage.setItem("user_status",i.user_status),f(`/account/${i.user_status}/${h}`)}}else if(a==="Sign Up"){await P(d,o,l,u);const i=await w(d,l,u);i.user_status==="member"?localStorage.setItem("username",i.name):i.user_status==="staff"&&localStorage.setItem("username",i.email);const h=localStorage.getItem("username");localStorage.setItem("user_id",i.user_id),localStorage.setItem("user_status",i.user_status),f(`/account/${i.user_status}/${h}`)}};return e(C,{children:y?e(L,{size:"25rem",sx:{margin:"auto"}}):e(x,{height:"auto",width:1,children:e("form",{noValidate:!0,autoComplete:"off",onSubmit:b,children:e(t,{container:!0,justifyContent:"center",alignItems:"center",height:"100vh",width:.8,margin:"0 auto",children:s(t,{item:!0,container:!0,flexDirection:"column",justifyContent:"start",width:.5,height:1,children:[s(t,{item:!0,container:!0,flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",height:.3,children:[e(t,{item:!0,fontSize:44,children:"SahrahJewellery"}),e(t,{item:!0,fontSize:30,fontWeight:800,children:a})]}),s(t,{item:!0,container:!0,flexDirection:"column",alignItems:"center",justifyContent:"space-evenly",padding:"1rem",height:.6,children:[a==="Sign Up"&&s(t,{item:!0,container:!0,flexDirection:"column",justifyContent:"space-evenly",alignItems:"start",width:.8,gap:2,children:[e(t,{item:!0,children:"Name"}),e(t,{item:!0,width:1,children:e(p,{fullWidth:!0,id:"outlined-basic",label:"Name",variant:"outlined",size:"big",onChange:n=>{c(n.target.value)},required:!0,inputProps:{"aria-label":"Name"}})})]}),s(t,{item:!0,container:!0,flexDirection:"column",justifyContent:"space-evenly",alignItems:"start",width:.8,gap:2,children:[e(t,{item:!0,children:"Email Address"}),e(t,{item:!0,width:1,children:e(p,{fullWidth:!0,id:"outlined-basic",label:"Email",variant:"outlined",size:"big",inputProps:{"aria-label":"Email"},onChange:n=>{r(n.target.value)},required:!0})})]}),["Login","Sign Up"].includes(a)&&s(t,{item:!0,container:!0,flexDirection:"column",justifyContent:"space-evenly",alignItems:"start",width:.8,gap:2,children:[e(t,{item:!0,textAlign:"start",children:"Password"}),e(t,{item:!0,width:1,children:e(p,{fullWidth:!0,id:"outlined-basic",label:"Password",variant:"outlined",size:"big",inputProps:{"aria-label":"Password"},onChange:n=>{S(n.target.value)},required:!0})})]}),e(t,{item:!0,width:.5,children:e(D,{variant:"outlined",size:"big",fullWidth:!0,onClick:b,"aria-label":a,children:a})}),a==="Login"?s(t,{item:!0,container:!0,justifyContent:"space-evenly",children:[e(t,{item:!0,component:g,to:"/account/sign_up","aria-label":"Link to sign up to shop",children:"Don't have account?"}),e(t,{item:!0,component:g,to:"/account/recover","aria-label":"Link to recover account by email",children:"Forgot password?"})]}):e(t,{item:!0,component:g,to:"/account/login","aria-label":"Link to Log in to shop",children:"Have an account?"})]})]})})})})})}function E(o){return o.split("_").map(r=>r[0].toUpperCase()+r.substring(1)).join(" ")}function W(){const[o,c]=m.useState(""),[l,r]=m.useState(""),[u,S]=m.useState(""),[y,d]=m.useState(!1),f=_(),v=j(),a=E(v.accessType),b=async n=>{if(n.preventDefault(),a==="Login"){const i=await w(d,l,u);if(i!=="error"){i.user_status==="member"?localStorage.setItem("username",i.name):i.user_status==="staff"&&localStorage.setItem("username",i.email);const h=localStorage.getItem("username");localStorage.setItem("user_id",i.user_id),localStorage.setItem("user_status",i.user_status),f(`/account/${i.user_status}/${h}`)}}else if(a==="Sign Up"){await P(d,o,l,u);const i=await w(d,l,u);i.user_status==="member"?localStorage.setItem("username",i.name):i.user_status==="staff"&&localStorage.setItem("username",i.email);const h=localStorage.getItem("username");localStorage.setItem("user_id",i.user_id),localStorage.setItem("user_status",i.user_status),f(`/account/${i.user_status}/${h}`)}};return e(C,{children:y?e(L,{size:"25rem",sx:{margin:"auto"}}):e(x,{height:"auto",width:1,children:e("form",{noValidate:!0,autoComplete:"off",onSubmit:b,children:e(t,{container:!0,justifyContent:"center",alignItems:"center",height:"100vh",width:.8,margin:"0 auto",children:s(t,{item:!0,container:!0,flexDirection:"column",justifyContent:"start",height:1,children:[s(t,{item:!0,container:!0,flexDirection:"column",justifyContent:"space-between",alignItems:"center",height:.2,children:[e(t,{item:!0,fontSize:40,children:"SahrahJewellery"}),e(t,{item:!0,fontSize:30,fontWeight:800,children:a})]}),s(t,{item:!0,container:!0,flexDirection:"column",alignItems:"center",justifyContent:"space-evenly",padding:"1rem",height:.8,children:[a==="Sign Up"&&s(t,{item:!0,container:!0,flexDirection:"column",justifyContent:"space-evenly",alignItems:"start",width:.8,gap:2,children:[e(t,{item:!0,children:"Name"}),e(t,{item:!0,width:1,children:e(p,{fullWidth:!0,id:"outlined-basic",label:"Name",variant:"outlined",size:"big",onChange:n=>{c(n.target.value)},required:!0,inputProps:{"aria-label":"Name"}})})]}),s(t,{item:!0,container:!0,flexDirection:"column",justifyContent:"space-evenly",alignItems:"start",width:.8,gap:2,children:[e(t,{item:!0,children:"Email Address"}),e(t,{item:!0,width:1,children:e(p,{fullWidth:!0,id:"outlined-basic",label:"Email",variant:"outlined",size:"big",inputProps:{"aria-label":"Email"},onChange:n=>{r(n.target.value)},required:!0})})]}),["Login","Sign Up"].includes(a)&&s(t,{item:!0,container:!0,flexDirection:"column",justifyContent:"space-evenly",alignItems:"start",width:.8,gap:2,children:[e(t,{item:!0,textAlign:"start",children:"Password"}),e(t,{item:!0,width:1,children:e(p,{fullWidth:!0,id:"outlined-basic",label:"Password",variant:"outlined",size:"big",inputProps:{"aria-label":"Password"},onChange:n=>{S(n.target.value)},required:!0})})]}),e(t,{item:!0,width:.5,marginTop:"1rem",marginBottom:"1rem",children:e(D,{variant:"outlined",size:"big",fullWidth:!0,onClick:b,"aria-label":a,children:a})}),a==="Login"?s(t,{item:!0,container:!0,justifyContent:"space-evenly",children:[e(t,{item:!0,component:g,to:"/account/sign_up","aria-label":"Link to sign up to shop",children:"Don't have account?"}),e(t,{item:!0,component:g,to:"/account/recover","aria-label":"Link to recover account by email",children:"Forgot password?"})]}):e(t,{item:!0,component:g,to:"/account/login","aria-label":"Link to Log in to shop",children:"Have an account?"})]})]})})})})})}function $(o){return o.split("_").map(r=>r[0].toUpperCase()+r.substring(1)).join(" ")}function A(){const[o,c]=m.useState(""),[l,r]=m.useState(""),[u,S]=m.useState(""),[y,d]=m.useState(!1),f=_(),v=j(),a=$(v.accessType),b=async n=>{if(n.preventDefault(),a==="Login"){const i=await w(d,l,u);if(i!=="error"){i.user_status==="member"?localStorage.setItem("username",i.name):i.user_status==="staff"&&localStorage.setItem("username",i.email);const h=localStorage.getItem("username");localStorage.setItem("user_id",i.user_id),localStorage.setItem("user_status",i.user_status),f(`/account/${i.user_status}/${h}`)}}else if(a==="Sign Up"){await P(d,o,l,u);const i=await w(d,l,u);i.user_status==="member"?localStorage.setItem("username",i.name):i.user_status==="staff"&&localStorage.setItem("username",i.email);const h=localStorage.getItem("username");localStorage.setItem("user_id",i.user_id),localStorage.setItem("user_status",i.user_status),f(`/account/${i.user_status}/${h}`)}};return e(C,{children:y?e(L,{size:"25rem",sx:{margin:"auto"}}):e(x,{height:"auto",width:1,children:e("form",{noValidate:!0,autoComplete:"off",onSubmit:b,children:e(t,{container:!0,justifyContent:"center",alignItems:"center",height:"100vh",width:.8,margin:"0 auto",children:s(t,{item:!0,container:!0,flexDirection:"column",justifyContent:"space-evenly",height:1,children:[s(t,{item:!0,container:!0,flexDirection:"column",justifyContent:"space-between",alignItems:"center",height:.2,children:[e(t,{item:!0,fontSize:30,children:"SahrahJewellery"}),e(t,{item:!0,fontSize:28,fontWeight:800,children:a})]}),s(t,{item:!0,container:!0,flexDirection:"column",alignItems:"center",justifyContent:"space-evenly",padding:"1rem",height:.8,children:[a==="Sign Up"&&s(t,{item:!0,container:!0,flexDirection:"column",justifyContent:"space-evenly",alignItems:"start",width:.8,gap:2,children:[e(t,{item:!0,children:"Name"}),e(t,{item:!0,children:e(p,{fullWidth:!0,id:"outlined-basic",label:"Name",variant:"outlined",size:"big",onChange:n=>{c(n.target.value)},required:!0,inputProps:{"aria-label":"Name"}})})]}),s(t,{item:!0,container:!0,flexDirection:"column",justifyContent:"space-evenly",alignItems:"start",width:.8,gap:2,children:[e(t,{item:!0,children:"Email Address"}),e(t,{item:!0,width:1,children:e(p,{fullWidth:!0,id:"outlined-basic",label:"Email",variant:"outlined",size:"big",inputProps:{"aria-label":"Email"},onChange:n=>{r(n.target.value)},required:!0})})]}),["Login","Sign Up"].includes(a)&&s(t,{item:!0,container:!0,flexDirection:"column",justifyContent:"space-evenly",alignItems:"start",width:.8,gap:2,children:[e(t,{item:!0,textAlign:"start",children:"Password"}),e(t,{item:!0,width:1,children:e(p,{fullWidth:!0,id:"outlined-basic",label:"Password",variant:"outlined",size:"big",inputProps:{"aria-label":"Password"},onChange:n=>{S(n.target.value)},required:!0})})]}),e(t,{item:!0,width:.5,marginTop:"1rem",marginBottom:"1rem",children:e(D,{variant:"outlined",size:"big",fullWidth:!0,onClick:b,"aria-label":a,children:a})}),a==="Login"?s(t,{item:!0,container:!0,justifyContent:"space-evenly",children:[e(t,{item:!0,component:g,to:"/account/sign_up","aria-label":"Link to sign up to shop",children:"Don't have account?"}),e(t,{item:!0,component:g,to:"/account/recover","aria-label":"Link to recover account by email",children:"Forgot password?"})]}):e(t,{item:!0,component:g,to:"/account/login","aria-label":"Link to Log in to shop",children:"Have an account?"})]})]})})})})})}function O(o){const c=k();return s(C,{children:[c.isDesktop&&e(N,{}),c.isTablet&&e(W,{}),c.isMobile&&e(A,{})]})}export{O as default};
